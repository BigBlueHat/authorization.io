<button onclick="createIdentity()" type="button" class="btn btn-primary">Create Identity</button>
<button onclick="acceptCredentials()" type="button" class="btn btn-primary">Accept credentials</button>
<script>
function createIdentity() {
	// TODO: This should post to /
	var queryUrl = '/create-identity';
	  /*queryUrl += '?credentials=true' + '&domain=' + 
	    encodeURIComponent(opts.domain) + '&callback=' + 
	    encodeURIComponent(opts.callback);*/
	var query = {
	  idp: {
	    did: 'foo',
	    url: 'idp'
	  },
	  callback: 'https://loginhub.dev:33443/idp'
	};
	var queryString = escapeHtml(JSON.stringify(query));
	console.log('qs', queryString);
	var form = document.createElement('form');
	form.setAttribute('method', 'post');
	form.setAttribute('action', queryUrl);
	form.innerHTML = 
	  '<input type="hidden" name="callerData" value="' + queryString + '" />';
	form.submit();

	function escapeHtml(str) {
	  return str
	    .replace(/&/g, '&amp;')
	    .replace(/</g, '&lt;')
	    .replace(/>/g, '&gt;')
	    .replace(/"/g, '&quot;');
	}
}

function acceptCredentials() {

	var queryUrl = '/credentials-approve';
	var query = {
	  	credentials: {
      		type: 'address'
		}
	};

	queryUrl += '?id=' + id;

	var queryString = escapeHtml(JSON.stringify(query));

	var form = document.createElement('form');
	form.setAttribute('method', 'post');
	form.setAttribute('action', queryUrl);
	form.innerHTML = 
	  '<input type="hidden" name="callerData" value="' + queryString + '" />';
	form.submit();

	function escapeHtml(str) {
	  return str
	    .replace(/&/g, '&amp;')
	    .replace(/</g, '&lt;')
	    .replace(/>/g, '&gt;')
	    .replace(/"/g, '&quot;');
	}
}
</script>
